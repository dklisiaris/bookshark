{"name":"Bookshark","tagline":"A ruby library for book metadata extraction from biblionet.gr.","body":"# Bookshark\r\n![Bookshark Logo](https://dl.dropboxusercontent.com/u/4888041/bookshark/logo.png)\r\n\r\nA ruby library for book metadata extraction from biblionet.gr which\r\nextracts books, authors, publishers and ddc metatdata.\r\nThe representation of bibliographic metadata in JSON is inspired by [BibJSON](http://okfnlabs.org/bibjson/) but some tags may be different.\r\n\r\n[![Build Status](https://travis-ci.org/dklisiaris/bookshark.svg?branch=master)](https://travis-ci.org/dklisiaris/bookshark)\r\n[![Dependency Status](https://gemnasium.com/dklisiaris/bookshark.svg)](https://gemnasium.com/dklisiaris/bookshark)\r\n\r\n## Installation\r\n\r\nAdd this line to your application's Gemfile:\r\n\r\n```ruby\r\ngem 'bookshark', \"~> 1.0.0.alpha\"\r\n```\r\n\r\nAnd then execute:\r\n\r\n    $ bundle install\r\n\r\nOr install it yourself as:\r\n\r\n    $ gem install bookshark --pre\r\n\r\nRequire and include bookshark in your class/module.\r\n\r\n```ruby\r\nrequire 'bookshark'\r\nclass Foo\r\n  include Bookshark\r\nend\r\n```\r\nAlternatively you can use this syntax\r\n\r\n```ruby\r\nBookshark::Extractor.new\r\n\r\n# Instead of this\r\ninclude Bookshark\r\nExtractor.new\r\n```\r\n\r\n## Extractor\r\nAn extractor object must be created in order to perform any metadata extractions.\r\n\r\nCreate an extractor object\r\n\r\n```ruby\r\nExtractor.new\r\nExtractor.new(format: 'json')\r\nExtractor.new(format: 'hash', site: 'biblionet')\r\n```\r\n**Extractor Options**:\r\n\r\n* format : The format in which the extracted data are returned\r\n  * hash (default)\r\n  * json\r\n  * pretty_json\r\n* site : The site from where the metadata will be extracted\r\n  * biblionet (default and currently the only available, so it can be skipped)\r\n\r\n### Extract Book Data\r\n\r\nYou need book's id on biblionet website or its uri.\r\nFirst create an extractor object:\r\n\r\n```ruby\r\n# Create a new extractor object with pretty json format.\r\nextractor = Extractor.new(format: 'pretty_json')\r\n```\r\nThen you can extract books\r\n\r\n```ruby\r\n# Extract book with isbn 960-14-1157-7 from website\r\nextractor.book(isbn: '960-14-1157-7')\r\n\r\n# ISBN-13 also works\r\nextractor.book(isbn: '978-960-14-1157-6')\r\n\r\n# ISBN without any dashes is ok too\r\nextractor.book(isbn: '9789601411576')\r\n\r\n# Extract book with id 103788 from website\r\nextractor.book(id: 103788)\r\n\r\n# Extract book from the provided webpage \r\nextractor.book(uri: 'http://biblionet.gr/book/103788/')\r\n\r\n# Extract book with id 103788 from local storage\r\nextractor.book(id: 103788, local: true)\r\n```\r\nFor more options, like book's title or author, use the search method which is described below.\r\n\r\n**Book Options** \r\n(Recommended option is to use just the id and let bookshark to generate uri):\r\n\r\n* id : The id of book on the corresponding site (Integer)\r\n* uri : The url of book web page or the path to local file.\r\n* local : Boolean value. Has page been saved locally? (default is false) \r\n* format : The format in which the extracted data are returned\r\n  * hash (default)\r\n  * json\r\n  * pretty_json\r\n* eager : Perform eager extraction? (Boolean - default is false)\r\n\r\n#### Eager Extraction\r\n\r\nEach book has some attributes such as authors, contributors, categories etc which are actually references to other objects.   \r\nBy default when extracting a book, you get only names of these objects and references to their pages.   \r\nWith eager option set to true, each of these objects' data is extracted and the produced output contains complete information about every object.   \r\nEager extraction doesn't work with local option enabled.\r\n\r\n```ruby\r\n# Extract book with id 103788 with eager extraction option enabled\r\nextractor.book(id: 103788, eager: true)\r\n```\r\n\r\nThe expected result of a book extraction is something like this:\r\n\r\n```json\r\n{\r\n  \"book\": [\r\n    {\r\n      \"title\": \"Σημεία και τέρατα της οικονομίας\",\r\n      \"subtitle\": \"Η κρυφή πλευρά των πάντων\",\r\n      \"image\": \"http://www.biblionet.gr/images/covers/b103788.jpg\",\r\n      \"author\": [\r\n        {\r\n          \"name\": \"Steven D. Levitt\",\r\n          \"b_id\": \"59782\"\r\n        },\r\n        {\r\n          \"name\": \"Stephen J. Dubner\",\r\n          \"b_id\": \"59783\"\r\n        }\r\n      ],\r\n      \"contributors\": {\r\n        \"μετάφραση\": [\r\n          {\r\n            \"name\": \"Άγγελος Φιλιππάτος\",\r\n            \"b_id\": \"851\"\r\n          }\r\n        ]\r\n      },\r\n      \"publisher\": {\r\n        \"name\": \"Εκδοτικός Οίκος Α. Α. Λιβάνη\",\r\n        \"b_id\": \"271\"\r\n      },\r\n      \"publication_year\": \"2006\",\r\n      \"pages\": \"326\",\r\n      \"isbn\": \"960-14-1157-7\",\r\n      \"isbn_13\": \"978-960-14-1157-6\",\r\n      \"status\": \"Κυκλοφορεί\",\r\n      \"price\": \"16,31\",\r\n      \"award\": [\r\n      ],\r\n      \"description\": \"Τι είναι πιο επικίνδυνο, ένα όπλο ή μια πισίνα; Τι κοινό έχουν οι δάσκαλοι με τους παλαιστές του σούμο;...\",\r\n      \"category\": [\r\n        {\r\n          \"ddc\": \"330\",\r\n          \"text\": \"Οικονομία\",\r\n          \"b_id\": \"142\"\r\n        }\r\n      ],\r\n      \"b_id\": \"103788\"\r\n    }\r\n  ]\r\n}\r\n```\r\nHere is a [Book Sample](https://gist.github.com/dklisiaris/a6f3d6f37806186f3c79) extracted with eager option enabled.\r\n\r\n### Book Search\r\nInstead of providing the exact book id and extract that book directly, a search function can be used to get one or more books based on some parameters.\r\n\r\n```ruby\r\n# Create a new extractor object with pretty json format.\r\nextractor = Extractor.new(format: 'pretty_json')\r\n\r\n# Extract books with these words in title\r\nextractor.search(title: 'σημεια και τερατα')\r\n\r\n# Extract books with these words in title and this name in author\r\nextractor.search(title: 'χομπιτ', author: 'τολκιν', results_type: 'metadata')\r\n\r\n# Extract books from specific author, published after 1984\r\nextractor.search(author: 'arthur doyle', after_year: '2010')\r\n\r\n# Extract ids of books books with these words in title and this name in author\r\nextractor.search(title: 'αρχοντας', author: 'τολκιν', results_type: 'ids')\r\n```\r\nSearching and extracting several books can be very slow at times, so instead of extracting every single book you may prefer only the ids of found books. In that case pass the option `results_type: 'ids'`.\r\n\r\n**Search Options**:  \r\nWith enought options you can customize your query to your needs. It is recommended to use at least two of the search options.\r\n\r\n* title (The title of book to search)       \r\n* author (The author's last name is enough for filter the search)      \r\n* publisher\r\n* category\r\n* title_split\r\n  * 0 (The exact title phrase must by matched)\r\n  * 1 (Default - All the words in title must be matched in whatever order)   \r\n  * 2 (At least one word should match)\r\n* book_id (Providing id means only one book should returned)      \r\n* isbn         \r\n* author_id (ID of the selected author)    \r\n* publisher_id \r\n* category_id  \r\n* after_year (Published this year or later)   \r\n* before_year (Published this year or before)   \r\n* results_type\r\n  * metadata (Default - Every book is extracted and an array of metadata is returned)\r\n  * ids (Only ids are returned)\r\n* format : The format in which the extracted data are returned\r\n  * hash (default)\r\n  * json\r\n  * pretty_json\r\n\r\nResults with ids option look like that:\r\n\r\n```json \r\n{\r\n \"book\": [\r\n    \"119000\",\r\n    \"103788\",\r\n    \"87815\",\r\n    \"87812\",\r\n    \"15839\",\r\n    \"77381\",\r\n    \"46856\",\r\n    \"46763\",\r\n    \"33301\"\r\n  ]\r\n}\r\n```\r\nNormally results are multiple books like the ones in book extractors:\r\n\r\n```json\r\n{\r\n  \"book\": [\r\n    {\r\n      \"title\": \"Στης Χλόης τα απόκρυφα\",\r\n      \"subtitle\": \"…και άλλα σημεία και τέρατα\",\r\n      \"... Rest of Metadata ...\": \"... condensed ...\"\r\n    },\r\n    {\r\n      \"title\": \"Σημεία και τέρατα της οικονομίας\",\r\n      \"subtitle\": \"Η κρυφή πλευρά των πάντων\",\r\n      \"... Rest of Metadata ...\": \"... condensed ...\"     \r\n    },\r\n    {\r\n      \"title\": \"Και άλλα σημεία και τέρατα από την ιστορία\",\r\n      \"subtitle\": null,\r\n      \"... Rest of Metadata ...\": \"... condensed ...\"\r\n    },\r\n    {\r\n      \"title\": \"Σημεία και τέρατα από την ιστορία\",\r\n      \"subtitle\": null,\r\n      \"... Rest of Metadata ...\": \"... condensed ...\"      \r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n### Extract Author Data\r\n\r\nYou need author's id on biblionet website or his uri\r\n\r\n```ruby\r\nExtractor.new.author(id: 10207)\r\nExtractor.new(format: 'json').author(uri: 'http://www.biblionet.gr/author/10207/')\r\n```\r\nExtraction from local saved html pages is also possible, but not recommended\r\n\r\n```ruby\r\nextractor = Extractor.new(format: 'json')\r\nextractor.author(uri: 'storage/html_author_pages/2/author_2423.html', local: true)\r\n```\r\n**Author Options**: (Recommended option is to use just the id and let bookshark to generate uri):\r\n* id : The id of author on the corresponding site (Integer)\r\n* uri : The url of author web page or the path to local file.\r\n* local : Boolean value. Has page been saved locally? (default is false) \r\n\r\nThe expected result of an author extraction is something like this:\r\n\r\n```json\r\n{\r\n  \"author\": [\r\n    {\r\n      \"name\": \"Tolkien, John Ronald Reuel\",\r\n      \"firstname\": \"John Ronald Reuel\",\r\n      \"lastname\": \"Tolkien\",\r\n      \"extra_info\": \"1892-1973\",\r\n      \"image\": \"http://www.biblionet.gr/images/persons/10207.jpg\",\r\n      \"bio\": \"Ο John Ronald Reuel Tolkien, άγγλος φιλόλογος και συγγραφέας, γεννήθηκε το 1892 στην πόλη Μπλουμφοντέιν...\",\r\n      \"award\": [\r\n        {\r\n          \"name\": \"The Benson Medal [The Royal Society of Literature]\",\r\n          \"year\": \"1966\"\r\n        }\r\n      ],\r\n      \"b_id\": \"10207\"\r\n    }\r\n  ]\r\n}\r\n```\r\nThe convention here is that there is never just a single author, but instead the author hash is stored inside an array. \r\nSo, it is easy to include metadata for multiple authors or even for multiple types of entities such as publishers or books on the same json file.\r\n\r\n### Extract Publisher Data\r\nMethods are pretty same as author:\r\n\r\n```ruby\r\n# Create a new extractor object with pretty json format.\r\nextractor = Extractor.new(format: 'pretty_json')\r\n\r\n# Extract publisher with id 20 from website\r\nextractor.publisher(id: 20)\r\n\r\n# Extract publisher from the provided webpage \r\nextractor.publisher(uri: 'http://biblionet.gr/com/20/')\r\n\r\n# Extract publisher with id 20 from local storage\r\nextractor.publisher(id: 20, local: true)\r\n```\r\n**Publisher Options**: (Recommended option is to use just the id and let bookshark to generate uri):\r\n\r\n* id : The id of publisher on the corresponding site (Integer)\r\n* uri : The url of publisher web page or the path to local file.\r\n* local : Boolean value. Has page been saved locally? (default is false) \r\n* format : The format in which the extracted data are returned\r\n  * hash (default)\r\n  * json\r\n  * pretty_json\r\n\r\nThe expected result of an author extraction is something like this:\r\n\r\n```json\r\n{\r\n  \"publisher\": [\r\n    {\r\n      \"name\": \"Εκδόσεις Πατάκη\",\r\n      \"owner\": \"Στέφανος Πατάκης\",\r\n      \"bookstores\": {\r\n        \"Κεντρική διάθεση\": {\r\n          \"address\": [\r\n            \"Εμμ. Μπενάκη 16\",\r\n            \"106 78 Αθήνα\"\r\n          ],\r\n          \"telephone\": [\r\n            \"210 3831078\"\r\n          ]\r\n        },\r\n        \"Γενικό βιβλιοπωλείο Πατάκη\": {\r\n          \"address\": [\r\n            \"Ακαδημίας 65\",\r\n            \"106 78 Αθήνα\"\r\n          ],\r\n          \"telephone\": [\r\n            \"210 3811850\",\r\n            \"210 3811740\"\r\n          ]\r\n        },\r\n        \"Έδρα\": {\r\n          \"address\": [\r\n            \"Παναγή Τσαλδάρη 38 (πρ. Πειραιώς)\",\r\n            \"104 37 Αθήνα\"\r\n          ],\r\n          \"telephone\": [\r\n            \"210 3650000\",\r\n            \"210 5205600\"\r\n          ],\r\n          \"fax\": \"210 3650069\",\r\n          \"email\": \"info@patakis.gr\",\r\n          \"website\": \"www.patakis.gr\"      \t  \r\n        }\r\n      },\r\n      \"b_id\": \"20\"\r\n    }\r\n  ]\r\n}\r\n```\r\n### Extract Categories\r\nBiblionet's categories are based on [Dewey Decimal Classification](http://en.wikipedia.org/wiki/Dewey_Decimal_Classification). It is possible to extract these categories also as seen below.\r\n\r\n```ruby\r\n# Create a new extractor object with pretty json format.\r\nextractor = Extractor.new(format: 'pretty_json')\r\n\r\n# Extract category with id 1041 from website\r\nextractor.category(id: 1041)\r\n\r\n# Extract category from the provided webpage \r\nextractor.category(uri: 'http://biblionet.gr/index/1041/')\r\n\r\n# Extract category with id 1041 from local storage\r\nextractor.category(id: 1041, local: true)\r\n```\r\n**Categories Options**: (Pretty much the same as previous cases)\r\n\r\n* id : The id of category on the corresponding site (Integer)\r\n* uri : The url of category web page or the path to local file.\r\n* local : Boolean value. Has page been saved locally? (default is false) \r\n* format : The format in which the extracted data are returned\r\n  * hash (default)\r\n  * json\r\n  * pretty_json\r\n\r\nNotice that when you are extracting a category you also extract parent categories and subcategories, thus you never extract just one category.\r\n\r\nThe expected result of a category extraction is something like this:\r\n(Here the extracted category is the 1041, but parent and sub categories were also extracted.\r\n\r\n```json\r\n{\r\n  \"category\": [\r\n    {\r\n      \"192\": {\r\n        \"ddc\": \"500\",\r\n        \"name\": \"Φυσικές και θετικές επιστήμες\",\r\n        \"parent\": null\r\n      },\r\n      \"1040\": {\r\n        \"ddc\": \"520\",\r\n        \"name\": \"Αστρονομία\",\r\n        \"parent\": \"192\"\r\n      },\r\n      \"1041\": {\r\n        \"ddc\": \"523\",\r\n        \"name\": \"Πλανήτες\",\r\n        \"parent\": \"1040\"\r\n      },\r\n      \"780\": {\r\n        \"ddc\": \"523.01\",\r\n        \"name\": \"Αστροφυσική\",\r\n        \"parent\": \"1041\"\r\n      },\r\n      \"2105\": {\r\n        \"ddc\": \"523.083\",\r\n        \"name\": \"Πλανήτες - Βιβλία για παιδιά\",\r\n        \"parent\": \"1041\"\r\n      },\r\n      \"576\": {\r\n        \"ddc\": \"523.1\",\r\n        \"name\": \"Κοσμολογία\",\r\n        \"parent\": \"1041\"\r\n      },\r\n      \"current\": {\r\n        \"ddc\": \"523\",\r\n        \"name\": \"Πλανήτες\",\r\n        \"parent\": \"1040\",\r\n        \"b_id\": \"1041\"\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\nNotice that the last item is the current category. The rest is the category tree.\r\n\r\n### Where do IDs point?\r\nThe id of each data type points to the corresponding type webpage.\r\nTake a look at this table:\r\n\r\n| ID      | Data Type   | Target Webpage                   |\r\n|---------|:-----------:|----------------------------------|\r\n| 103788  | book        | http://biblionet.gr/book/103788  |\r\n| 10207   | author      | http://biblionet.gr/author/10207 |\r\n| 20      | publisher   | http://biblionet.gr/com/20       | \r\n| 1041    | category    | http://biblionet.gr/index/1041   |\r\n\r\nSo if you want to use the uri option provide the target webpage's url as seen above without any slugs after th id.\r\n\r\n## Contributing\r\n\r\n1. Fork it ( https://github.com/[my-github-username]/bookshark/fork )\r\n2. Create your feature branch (`git checkout -b my-new-feature`)\r\n3. Commit your changes (`git commit -am 'Add some feature'`)\r\n4. Push to the branch (`git push origin my-new-feature`)\r\n5. Create a new Pull Request","google":"UA-60418692-3","note":"Don't delete this file! It's used internally to help with page regeneration."}